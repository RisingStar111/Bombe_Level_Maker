<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Template</title>
    <style>
        /* Add any CSS styles here */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        #canvasContainer {
            position: relative;
        }
        canvas {
            border: 1px solid #ccc;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
        }
        #controlPanel {
            position: absolute;
            top: 10px;
            right: 10px;
        }
        #textSizeInput {
            width: 50px;
            padding: 5px;
        }
    </style>
</head>
<body>
    <h1>Website Template</h1>
    <div id="canvasContainer">
        <canvas id="canvas" width="400" height="200"></canvas>
        <div id="buttons">
            <button onclick="drawText()">Draw Text</button>
            <button onclick="setShape('Square')">Generate Square</button>
            <button onclick="setShape('Triangle')">Generate Triangle</button>
        </div>
        <div id="buttons2">
            <button onclick="setShape('Hexagon')">Generate Hexagon</button>
            <button onclick="clearCanvas()">Clear Canvas</button>
            <button onclick="exportTextToClipboard()">Export Text</button>
        </div>
        <div>
            <label for="tileSizeInput">Tile Size:</label>
            <input type="text" id="tileSizeInput" oninput="updateTileSize()" maxlength="3" pattern="[0-9]*">
        </div>
    </div>
    <div id="controlPanel">
        <input type="checkbox" id="toggleInfinite" onchange="toggleTiling()"> Toggle Infinite
        <div id="lastClickDisplay"></div>
    </div>

    <script>
        // Add your JavaScript code here
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let drawnText = "";
        let infiniteTiling = false;
        const lastClickDisplay = document.getElementById('lastClickDisplay');
        let tileSize = 100; // Default text size

        function updateTileSize() {
            const inputElement = document.getElementById('tileSizeInput');
            const value = inputElement.value;

            // Check if the input is a valid number and update the tileSize variable
            if (/^\d+$/.test(value)) {
                tileSize = parseInt(value, 10);
                drawShapeOnCanvas();
            } else {
                // If the input is not a valid number, set it back to the previous value
                inputElement.value = tileSize;
            }
        }

        function displayLastClickPosition(x, y) {
            lastClickDisplay.innerText = `Last Click Position: (x: ${x}, y: ${y})`;
        }

        function displayShapeInfo(x, y) {
            const index = getShapeIndexFromCoordinates(x, y);
            console.log('Clicked on shape index:', index);
        }

        function getShapeIndexFromCoordinates(x, y) {
            const tileOffsetX = drawnText === tileSize;
            const tileOffsetY = drawnText === "Hexagon" ? (3 / Math.sqrt(3) * tileSize) / 2 : tileSize;
            let rowOffset = drawnText === "Triangle" ? 0 : tileOffsetX / 2;

            let col = Math.floor(x / tileOffsetX);
            let row = Math.floor(y / tileOffsetY);

            if (infiniteTiling) {
                rowOffset = (rowOffset === 0) ? tileOffsetX / 2 : 0;
                if (drawnText === "Triangle") {
                    row += Math.floor((x - col * tileOffsetX) / tileOffsetX);
                    if (row % 2 === 1) {
                        col = Math.floor((x - rowOffset) / tileOffsetX);
                    } else {
                        col = Math.floor((x - (rowOffset + tileOffsetX / 2)) / tileOffsetX);
                    }
                } else if (drawnText === "Hexagon") {
                    col -= Math.floor(row / 2);
                }
            }

            return row * Math.ceil(canvas.width / tileOffsetX) + col;
        }

        canvas.addEventListener('click', function (event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            // Use the x and y values to perform actions based on the user's click position
            console.log('Clicked at (x, y):', x, y);
            displayLastClickPosition(x, y);
            displayShapeInfo(x, y);
        });

        function drawText() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'black';
            ctx.font = '20px Arial';
            const text = "Sample Text";
            ctx.fillText(text, 50, 100);
            drawnText = text;
        }

        function drawSquare(x, y) {
            ctx.fillStyle = 'blue';
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x + tileSize, y);
            ctx.lineTo(x + tileSize, y + tileSize);
            ctx.lineTo(x, y + tileSize);
            ctx.closePath();
            ctx.stroke();
        }

        function drawTriangle(x, y, upsideDown) {
            ctx.fillStyle = 'green';
            ctx.beginPath();
            if (upsideDown) {
                ctx.moveTo(x + tileSize, y + (Math.sqrt(3) / 2) * tileSize);
                ctx.lineTo(x + tileSize / 2,y);
                ctx.lineTo(x, y + (Math.sqrt(3) / 2) * tileSize);
            } else {
                ctx.moveTo(x, y);
                ctx.lineTo(x + tileSize, y);
                ctx.lineTo(x + tileSize / 2, y + (Math.sqrt(3) / 2) * tileSize);
            }
            ctx.closePath();
            ctx.stroke();
        }

        function drawHexagon(x, y) {
            ctx.fillStyle = 'orange';
            ctx.beginPath();
            ctx.moveTo(x + tileSize / 2, y);
            ctx.lineTo(x + tileSize, y + (1 / Math.sqrt(3)) * tileSize / 2);
            ctx.lineTo(x + tileSize, y + (3 / Math.sqrt(3)) * tileSize / 2);
            ctx.lineTo(x + tileSize / 2, y + (4 / Math.sqrt(3)) * tileSize / 2);
            ctx.lineTo(x, y + (3 / Math.sqrt(3)) * tileSize / 2);
            ctx.lineTo(x, y + (1 / Math.sqrt(3)) * tileSize / 2);
            ctx.closePath();
            ctx.stroke();
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawnText = "";
        }

        function exportTextToClipboard() {
            if (drawnText) {
                const el = document.createElement('textarea');
                el.value = drawnText;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                alert('Text copied to clipboard: ' + drawnText);
            } else {
                alert('No text to copy.');
            }
        }

        function toggleTiling() {
            infiniteTiling = document.getElementById('toggleInfinite').checked;
            drawShapeOnCanvas();
        }

        function setShape(shape) {
            drawnText = shape;
            drawShapeOnCanvas();
        }

        function drawShapeOnCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const tileOffsetX = drawnText === "Triangle" ? tileSize / 2 : tileSize;
            const tileOffsetY = drawnText === "Square" ? tileSize : (3 / Math.sqrt(3) * tileSize) / 2;
            let rowOffset = drawnText === "Triangle" ? 0 : tileOffsetX / 2;

            if (infiniteTiling) {
                for (let i = 0; i < canvas.width + tileOffsetX; i += tileOffsetX) {
                    let alternateRow = (rowOffset === 0) ? false : true;

                    for (let j = 0; j < canvas.height + tileOffsetY; j += tileOffsetY) {
                        if (drawnText === "Square") {
                            drawSquare(i, j);
                        } else if (drawnText === "Triangle") {
                            drawTriangle(i, j, alternateRow);
                            alternateRow = !alternateRow;
                        } else if (drawnText === "Hexagon") {
                            drawHexagon(i + (alternateRow ? 0 : tileOffsetX / 2), j);
                        }
                    }
                    rowOffset = (rowOffset === 0) ? tileOffsetX / 2 : 0;
                }
            } else {
                if (drawnText === "Square") {
                    drawSquare(tileOffsetX, tileOffsetY);
                } else if (drawnText === "Triangle") {
                    drawTriangle(tileOffsetX, tileOffsetY, false);
                } else if (drawnText === "Hexagon") {
                    drawHexagon(tileOffsetX, tileOffsetY);
                }
            }
        }
    </script>
</body>
</html>
